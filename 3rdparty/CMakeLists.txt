add_library(3rdparty OBJECT vrf03/convert.c vrf03/verify.c vrf03/keypair.c vrf03/prove.c vrf03/ed25519_ref10.c blst/src/server.c)
if(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
    target_compile_options(3rdparty PRIVATE -Wno-unused-function)
    target_compile_options(3rdparty PRIVATE -Wno-array-parameter)
elseif(CMAKE_CXX_COMPILER_ID STREQUAL "Clang")
    target_compile_options(3rdparty PRIVATE -Wno-unused-function)
endif()
if (WIN32)
    file(GLOB_RECURSE BLST_ASM_SRCS blst/build/win64/*-x86_64.asm)
    target_sources(3rdparty PRIVATE ${BLST_ASM_SRCS})
else()
    target_sources(3rdparty PRIVATE blst/build/assembly.S)
endif()

target_include_directories(3rdparty PUBLIC .)
set_target_properties(3rdparty PROPERTIES LINKER_LANGUAGE C)

add_library(3rdparty-cpp OBJECT hash-library/sha3.cpp hash-library/crc32.cpp hash-library/keccak.cpp nanobench.cpp)
target_include_directories(3rdparty-cpp PUBLIC .)
set_target_properties(3rdparty-cpp PROPERTIES LINKER_LANGUAGE CXX)
